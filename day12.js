const input = [
    ["W", 4],
    ["N", 1],
    ["F", 35],
    ["R", 90],
    ["F", 2],
    ["N", 3],
    ["W", 4],
    ["S", 1],
    ["R", 90],
    ["F", 89],
    ["W", 3],
    ["N", 3],
    ["R", 90],
    ["W", 5],
    ["F", 46],
    ["L", 90],
    ["W", 5],
    ["L", 90],
    ["F", 15],
    ["W", 5],
    ["N", 5],
    ["E", 1],
    ["F", 92],
    ["N", 2],
    ["W", 5],
    ["L", 180],
    ["F", 27],
    ["N", 4],
    ["F", 32],
    ["R", 90],
    ["S", 5],
    ["F", 12],
    ["E", 3],
    ["R", 90],
    ["N", 2],
    ["F", 54],
    ["R", 180],
    ["E", 2],
    ["L", 90],
    ["E", 1],
    ["R", 180],
    ["F", 98],
    ["N", 5],
    ["F", 41],
    ["S", 1],
    ["R", 180],
    ["N", 5],
    ["F", 24],
    ["W", 5],
    ["R", 90],
    ["S", 4],
    ["R", 180],
    ["W", 4],
    ["R", 90],
    ["W", 3],
    ["N", 5],
    ["E", 2],
    ["F", 69],
    ["N", 2],
    ["R", 180],
    ["F", 48],
    ["W", 2],
    ["N", 4],
    ["E", 5],
    ["S", 1],
    ["W", 1],
    ["F", 39],
    ["S", 5],
    ["L", 90],
    ["E", 4],
    ["R", 180],
    ["E", 4],
    ["L", 180],
    ["E", 1],
    ["R", 90],
    ["F", 97],
    ["S", 2],
    ["L", 270],
    ["N", 5],
    ["E", 2],
    ["R", 90],
    ["S", 1],
    ["R", 90],
    ["E", 4],
    ["N", 4],
    ["F", 2],
    ["N", 3],
    ["L", 90],
    ["E", 4],
    ["F", 84],
    ["W", 5],
    ["N", 2],
    ["E", 4],
    ["S", 2],
    ["E", 1],
    ["S", 5],
    ["E", 2],
    ["N", 4],
    ["E", 1],
    ["F", 94],
    ["R", 180],
    ["N", 2],
    ["L", 90],
    ["W", 4],
    ["L", 180],
    ["F", 82],
    ["E", 1],
    ["L", 270],
    ["F", 14],
    ["S", 5],
    ["S", 5],
    ["R", 90],
    ["F", 75],
    ["R", 90],
    ["E", 5],
    ["S", 3],
    ["R", 90],
    ["N", 2],
    ["F", 94],
    ["L", 180],
    ["E", 4],
    ["F", 3],
    ["E", 5],
    ["N", 3],
    ["R", 90],
    ["N", 1],
    ["E", 1],
    ["S", 1],
    ["R", 90],
    ["N", 4],
    ["L", 90],
    ["E", 3],
    ["L", 270],
    ["F", 45],
    ["E", 2],
    ["S", 2],
    ["E", 1],
    ["F", 67],
    ["L", 90],
    ["F", 15],
    ["N", 3],
    ["W", 4],
    ["N", 3],
    ["R", 90],
    ["F", 51],
    ["N", 3],
    ["S", 2],
    ["R", 90],
    ["N", 1],
    ["L", 180],
    ["W", 3],
    ["L", 90],
    ["W", 5],
    ["F", 8],
    ["N", 3],
    ["F", 36],
    ["N", 2],
    ["L", 90],
    ["S", 4],
    ["F", 91],
    ["N", 1],
    ["E", 4],
    ["R", 90],
    ["E", 5],
    ["L", 90],
    ["E", 2],
    ["F", 77],
    ["R", 90],
    ["E", 4],
    ["F", 8],
    ["W", 2],
    ["R", 90],
    ["N", 5],
    ["R", 90],
    ["E", 5],
    ["S", 4],
    ["W", 5],
    ["F", 68],
    ["N", 1],
    ["F", 72],
    ["S", 3],
    ["W", 3],
    ["F", 36],
    ["E", 5],
    ["F", 53],
    ["E", 1],
    ["E", 1],
    ["N", 3],
    ["W", 3],
    ["N", 5],
    ["L", 270],
    ["S", 2],
    ["L", 180],
    ["E", 3],
    ["S", 2],
    ["W", 1],
    ["R", 90],
    ["E", 5],
    ["S", 1],
    ["W", 5],
    ["N", 1],
    ["F", 16],
    ["W", 5],
    ["N", 2],
    ["E", 2],
    ["N", 3],
    ["F", 9],
    ["S", 3],
    ["L", 180],
    ["F", 33],
    ["E", 2],
    ["L", 90],
    ["R", 90],
    ["F", 13],
    ["S", 4],
    ["W", 3],
    ["S", 5],
    ["F", 71],
    ["N", 1],
    ["S", 2],
    ["F", 49],
    ["E", 5],
    ["F", 3],
    ["S", 3],
    ["L", 270],
    ["N", 4],
    ["E", 3],
    ["R", 270],
    ["N", 2],
    ["L", 90],
    ["F", 96],
    ["S", 3],
    ["R", 180],
    ["F", 48],
    ["E", 3],
    ["N", 3],
    ["F", 2],
    ["E", 1],
    ["S", 5],
    ["F", 88],
    ["W", 4],
    ["F", 98],
    ["E", 5],
    ["F", 45],
    ["R", 90],
    ["N", 5],
    ["W", 5],
    ["L", 90],
    ["S", 3],
    ["E", 1],
    ["F", 18],
    ["E", 3],
    ["S", 1],
    ["F", 59],
    ["L", 270],
    ["N", 4],
    ["L", 180],
    ["W", 4],
    ["S", 2],
    ["F", 88],
    ["L", 90],
    ["N", 4],
    ["F", 1],
    ["L", 180],
    ["E", 4],
    ["L", 90],
    ["W", 4],
    ["R", 180],
    ["F", 50],
    ["L", 180],
    ["W", 5],
    ["F", 14],
    ["S", 4],
    ["F", 6],
    ["R", 90],
    ["E", 1],
    ["N", 5],
    ["E", 3],
    ["F", 51],
    ["R", 90],
    ["E", 5],
    ["R", 90],
    ["F", 78],
    ["S", 1],
    ["W", 4],
    ["N", 2],
    ["R", 90],
    ["F", 43],
    ["E", 2],
    ["N", 4],
    ["R", 90],
    ["F", 44],
    ["L", 90],
    ["F", 16],
    ["N", 2],
    ["W", 4],
    ["S", 2],
    ["F", 53],
    ["S", 4],
    ["W", 5],
    ["F", 30],
    ["L", 90],
    ["E", 4],
    ["F", 87],
    ["E", 3],
    ["L", 90],
    ["S", 1],
    ["F", 34],
    ["W", 1],
    ["L", 90],
    ["F", 74],
    ["S", 3],
    ["F", 4],
    ["E", 4],
    ["N", 2],
    ["F", 34],
    ["W", 1],
    ["L", 180],
    ["F", 57],
    ["E", 3],
    ["R", 90],
    ["W", 4],
    ["N", 1],
    ["R", 90],
    ["E", 3],
    ["R", 180],
    ["F", 51],
    ["S", 2],
    ["R", 90],
    ["S", 1],
    ["E", 4],
    ["S", 4],
    ["F", 19],
    ["W", 3],
    ["F", 64],
    ["E", 3],
    ["N", 1],
    ["E", 2],
    ["L", 90],
    ["E", 3],
    ["W", 1],
    ["S", 3],
    ["R", 90],
    ["F", 81],
    ["E", 3],
    ["S", 5],
    ["R", 90],
    ["F", 11],
    ["R", 90],
    ["W", 4],
    ["N", 5],
    ["W", 2],
    ["S", 4],
    ["W", 1],
    ["S", 4],
    ["F", 70],
    ["L", 180],
    ["F", 75],
    ["F", 55],
    ["S", 2],
    ["W", 3],
    ["S", 1],
    ["L", 90],
    ["E", 3],
    ["L", 90],
    ["W", 1],
    ["F", 41],
    ["S", 3],
    ["L", 90],
    ["N", 5],
    ["L", 90],
    ["W", 4],
    ["F", 6],
    ["R", 180],
    ["E", 4],
    ["F", 37],
    ["L", 90],
    ["F", 68],
    ["R", 90],
    ["W", 3],
    ["F", 82],
    ["S", 5],
    ["L", 270],
    ["S", 5],
    ["F", 86],
    ["L", 90],
    ["F", 44],
    ["R", 90],
    ["W", 4],
    ["R", 180],
    ["S", 3],
    ["F", 73],
    ["L", 90],
    ["E", 5],
    ["R", 90],
    ["E", 1],
    ["S", 3],
    ["L", 90],
    ["F", 15],
    ["R", 90],
    ["F", 84],
    ["L", 90],
    ["R", 90],
    ["S", 4],
    ["W", 2],
    ["E", 3],
    ["R", 180],
    ["F", 29],
    ["R", 90],
    ["W", 2],
    ["F", 28],
    ["N", 4],
    ["E", 2],
    ["N", 2],
    ["F", 66],
    ["R", 90],
    ["E", 5],
    ["R", 90],
    ["L", 270],
    ["S", 1],
    ["F", 34],
    ["E", 3],
    ["S", 3],
    ["F", 57],
    ["N", 4],
    ["S", 4],
    ["F", 27],
    ["N", 4],
    ["W", 5],
    ["L", 180],
    ["E", 1],
    ["S", 2],
    ["F", 8],
    ["S", 4],
    ["E", 5],
    ["L", 180],
    ["F", 40],
    ["L", 90],
    ["N", 5],
    ["W", 5],
    ["N", 2],
    ["L", 270],
    ["F", 9],
    ["E", 5],
    ["N", 2],
    ["E", 2],
    ["L", 90],
    ["N", 4],
    ["R", 90],
    ["S", 2],
    ["E", 2],
    ["F", 70],
    ["E", 1],
    ["N", 2],
    ["F", 100],
    ["L", 90],
    ["E", 1],
    ["F", 59],
    ["L", 180],
    ["E", 3],
    ["S", 3],
    ["L", 180],
    ["F", 97],
    ["W", 1],
    ["F", 61],
    ["S", 1],
    ["E", 2],
    ["N", 3],
    ["R", 90],
    ["W", 1],
    ["E", 2],
    ["R", 90],
    ["F", 50],
    ["S", 2],
    ["W", 5],
    ["F", 86],
    ["S", 1],
    ["L", 90],
    ["S", 3],
    ["F", 8],
    ["L", 90],
    ["E", 2],
    ["F", 36],
    ["L", 180],
    ["E", 4],
    ["R", 180],
    ["E", 3],
    ["N", 3],
    ["E", 1],
    ["F", 94],
    ["N", 3],
    ["F", 64],
    ["L", 90],
    ["S", 1],
    ["S", 1],
    ["F", 33],
    ["E", 3],
    ["S", 1],
    ["L", 90],
    ["N", 3],
    ["W", 5],
    ["N", 4],
    ["L", 90],
    ["F", 53],
    ["W", 1],
    ["N", 5],
    ["F", 67],
    ["E", 2],
    ["F", 43],
    ["N", 5],
    ["W", 3],
    ["W", 3],
    ["L", 90],
    ["L", 90],
    ["E", 1],
    ["S", 4],
    ["W", 3],
    ["R", 180],
    ["S", 1],
    ["F", 79],
    ["S", 2],
    ["W", 2],
    ["F", 23],
    ["L", 90],
    ["W", 3],
    ["F", 65],
    ["E", 1],
    ["R", 180],
    ["E", 4],
    ["N", 3],
    ["L", 180],
    ["S", 4],
    ["E", 3],
    ["E", 5],
    ["L", 90],
    ["F", 92],
    ["W", 4],
    ["F", 57],
    ["S", 3],
    ["L", 90],
    ["S", 2],
    ["L", 90],
    ["S", 2],
    ["F", 50],
    ["E", 3],
    ["L", 90],
    ["S", 3],
    ["R", 180],
    ["E", 4],
    ["F", 14],
    ["E", 5],
    ["S", 5],
    ["E", 3],
    ["N", 2],
    ["L", 180],
    ["W", 4],
    ["S", 5],
    ["S", 1],
    ["L", 90],
    ["F", 1],
    ["S", 4],
    ["F", 4],
    ["R", 90],
    ["S", 5],
    ["F", 15],
    ["N", 4],
    ["L", 90],
    ["W", 3],
    ["L", 90],
    ["S", 5],
    ["L", 270],
    ["W", 1],
    ["R", 90],
    ["S", 3],
    ["L", 90],
    ["W", 4],
    ["F", 16],
    ["R", 90],
    ["S", 1],
    ["F", 61],
    ["L", 90],
    ["N", 5],
    ["R", 90],
    ["F", 21],
    ["R", 90],
    ["N", 4],
    ["W", 1],
    ["F", 36],
    ["S", 1],
    ["L", 90],
    ["W", 4],
    ["R", 90],
    ["E", 3],
    ["N", 1],
    ["F", 68],
    ["N", 4],
    ["E", 4],
    ["R", 90],
    ["E", 5],
    ["S", 1],
    ["R", 90],
    ["F", 2],
    ["R", 90],
    ["E", 3],
    ["W", 2],
    ["R", 180],
    ["F", 13],
    ["R", 90],
    ["S", 5],
    ["F", 99],
    ["E", 5],
    ["R", 90],
    ["F", 8],
    ["S", 5],
    ["F", 54],
    ["L", 90],
    ["S", 4],
    ["R", 180],
    ["W", 2],
    ["S", 1],
    ["F", 32],
    ["W", 3],
    ["N", 2],
    ["W", 3],
    ["N", 3],
    ["E", 2],
    ["N", 2],
    ["R", 180],
    ["S", 5],
    ["E", 1],
    ["R", 90],
    ["F", 73],
    ["L", 90],
    ["W", 4],
    ["R", 90],
    ["S", 4],
    ["F", 29],
    ["F", 60],
    ["L", 90],
    ["N", 5],
    ["E", 3],
    ["N", 5],
    ["E", 1],
    ["F", 94],
    ["N", 1],
    ["E", 5],
    ["R", 180],
    ["N", 3],
    ["E", 2],
    ["R", 90],
    ["W", 3],
    ["L", 180],
    ["F", 55],
    ["N", 2],
    ["W", 2],
    ["R", 270],
    ["F", 64],
    ["E", 5],
    ["W", 1],
    ["N", 4],
    ["E", 4],
    ["N", 3],
    ["E", 1],
    ["R", 90],
    ["E", 1],
    ["S", 4],
    ["L", 270],
    ["W", 4],
    ["S", 4],
    ["L", 180],
    ["F", 33],
    ["R", 90],
    ["E", 5],
    ["S", 2],
    ["W", 3],
    ["W", 5],
    ["N", 3],
    ["W", 2],
    ["F", 20],
    ["W", 5],
    ["S", 3],
    ["W", 3],
    ["R", 180],
    ["F", 99],
    ["E", 1],
    ["F", 4],
    ["E", 5],
    ["F", 34],
    ["F", 1],
    ["F", 43],
    ["S", 4],
    ["E", 5],
    ["R", 90],
    ["N", 5],
    ["F", 95],
    ["W", 4],
    ["F", 10],
    ["N", 1],
    ["L", 90],
    ["S", 4],
    ["W", 2],
    ["L", 90],
    ["F", 41],
    ["L", 270],
    ["F", 89],
    ["L", 90],
    ["F", 34],
    ["N", 5],
    ["F", 2],
    ["W", 3],
    ["F", 27],
    ["S", 1],
    ["R", 270],
    ["W", 3],
    ["N", 2],
    ["R", 90],
    ["F", 13],
    ["N", 1],
    ["F", 78],
    ["W", 4],
    ["R", 90],
    ["S", 5],
    ["F", 27],
    ["N", 5],
    ["E", 4],
    ["F", 61],
    ["L", 180],
    ["N", 2],
    ["R", 90],
    ["W", 5],
    ["S", 4],
    ["S", 4],
    ["E", 1],
    ["F", 8],
    ["R", 90],
    ["E", 2],
    ["R", 90],
    ["E", 5],
    ["F", 1],
    ["E", 1],
    ["L", 90],
    ["F", 32],
    ["W", 3],
    ["S", 1],
    ["S", 3],
    ["R", 90],
    ["E", 5],
    ["F", 84],
    ["N", 3],
    ["F", 17],
    ["R", 90],
    ["S", 2],
    ["F", 80],
    ["L", 90],
    ["F", 84],
    ["S", 1],
    ["F", 63],
    ["R", 90],
    ["N", 1],
    ["R", 90],
    ["N", 3],
    ["F", 88],
    ["F", 16],
    ["N", 3],
    ["W", 1],
    ["N", 5],
    ["L", 180],
    ["S", 5],
    ["F", 66],
    ["R", 90],
    ["W", 1],
    ["F", 85],
    ["S", 1],
    ["F", 69],
    ["R", 180],
    ["S", 3],
    ["F", 67],
    ["F", 69],
    ["W", 2],
    ["F", 72],
    ["R", 180],
    ["W", 5],
    ["F", 13],
];

const test = [
    ["F", 10],
    ["N", 3],
    ["F", 7],
    ["R", 90],
    ["F", 11],
];

const dirs = input; // CHANGE ME

const manhattanDistance = dirs => {
    let position = [0, 0];
    let forward = "E";
    const deltas = { N: [-1, 0], E: [0, 1], S: [1, 0], W: [0, -1] };
    const headings = Object.keys(deltas);

    for (let i = 0; i < dirs.length; i++) {
        let [heading, value] = dirs[i];
        if (heading === "L" || heading === "R") {
            const mod = heading === "L" ? -1 : 1;
            const steps = value / 90;
            const currentHeadingIdx = headings.indexOf(forward);
            forward =
                headings[
                    (currentHeadingIdx + 4 + steps * mod) % headings.length
                ];
        } else {
            heading = heading === "F" ? forward : heading;
            position = [
                position[0] + deltas[heading][0] * value,
                position[1] + deltas[heading][1] * value,
            ];
        }
    }

    return Math.abs(position[0]) + Math.abs(position[1]);
};

const turn = (pos, dir) => {
    switch (dir) {
        case "R":
            return [pos[1], pos[0] * -1];
            break;
        case "L":
            return [pos[1] * -1, pos[0]];
            break;
        default:
            break;
    }
};

const manhattanDistanceWaypoints = dirs => {
    let position = [0, 0];
    let waypoint = [-1, 10];
    let forward = "E";
    const deltas = { N: [-1, 0], E: [0, 1], S: [1, 0], W: [0, -1] };
    const headings = Object.keys(deltas);

    for (let i = 0; i < dirs.length; i++) {
        let [heading, value] = dirs[i];
        if (heading === "L" || heading === "R") {
            const times = value / 90;
            for (let t = 0; t < times; t++) {
                waypoint = turn(waypoint, heading);
            }
        } else if (heading === "F") {
            position = [
                position[0] + waypoint[0] * value,
                position[1] + waypoint[1] * value,
            ];
        } else {
            waypoint = [
                waypoint[0] + deltas[heading][0] * value,
                waypoint[1] + deltas[heading][1] * value,
            ];
        }
    }

    return Math.abs(position[0]) + Math.abs(position[1]);
};

console.log(manhattanDistanceWaypoints(dirs));
